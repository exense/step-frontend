<div class="modal-header">
	<h3 class="modal-title">{{mode=='edit'?'Edit':'New'}} Input</h3>
</div>
<div class="modal-body">
	<strong>{{description}}</strong>
	<form ng-submit="save()">
		<div class="form-group">
			<label>ID</label> 
			<span class="glyphicon glyphicon-question-sign" uib-tooltip="Keys containing 'pwd' or 'password' will be automatically protected" tooltip-append-to-body="true"></span>
			<input class="form-control"	ng-model="input.input.id" autofocus>
		</div>
		<div class="form-group">
			<label>Label</label> 
			<input class="form-control"	ng-model="input.input.label">
		</div>
		<div class="form-group">
			<label>Description</label> 
			<input class="form-control"	ng-model="input.input.description">
		</div>
		<div class="form-group">
			<label>Type</label> 
			<select class="form-control" ng-model="input.input.type" ng-options="x for x in ['DROPDOWN','TEXT','CHECKBOX']"></select>
		</div>
		<div class="form-group" ng-if="input.input.type=='DROPDOWN'">
			<label>Options
				<button type="button" class="btn btn-default btn-xs" ng-click="addOption()">
					<span class="glyphicon glyphicon-plus" aria-hidden="true"></span>
				</button>
			</label>
			<div class="panel panel-default">
				<div class="panel-body">
					<div>
						<table style="width:100%">
							<tbody>
								<tr ng-repeat="option in input.input.options">
									<td style="padding:2px;"><input class="form-control input-sm" ng-model="option.value" placeholder="Value"></td>
									<td style="padding:2px;"><input class="form-control input-sm" ng-model="option.activationExpression.script" placeholder="Activation expression"></td>
									<td style="padding:2px;">
										<div class="btn-group">
											<button class="btn btn-default btn-xs" ng-click="moveOption(option.value, -1)" type="button"><i class="glyphicon glyphicon glyphicon-chevron-up"></i></button>
								    		<button class="btn btn-default btn-xs" ng-click="moveOption(option.value, 1)" type="button"><i class="glyphicon glyphicon glyphicon-chevron-down"></i></button>
								  		</div>
										<div class="btn-group">
											<button class="btn btn-danger btn-xs" ng-click="removeOption(option.value)" type="button"><i class="glyphicon glyphicon-remove"></i></button>
										</div>
									</td>	
								</tr>
							</tbody>
						</table>
					</div>
				</div>
			</div>
		</div>
		<div class="form-group">
			<label>Default value</label>
			<span class="glyphicon glyphicon-question-sign" uib-tooltip="Defines the default value of this input field (Optional)" tooltip-append-to-body="true"></span>
			<input class="form-control"	ng-model="input.input.defaultValue">
		</div>
		<div class="form-group">
			<label>Activation expression</label> 
			<input class="form-control"	ng-model="input.input.activationExpression.script">
		</div>
		
		<div class="panel panel-default">
			<div class="panel-heading">
				<a ng-click="showAdvanced = !showAdvanced">Advanced</a>
			</div>
			<div class="panel-body" ng-show="showAdvanced">
				<div class="form-group">
					<label>Value HTML Template</label> 
					<span class="glyphicon glyphicon-question-sign" uib-tooltip="The HTML template to be used to display the value of the input (Optional)" tooltip-append-to-body="true"></span>
					<input class="form-control"	ng-model="input.input.valueHtmlTemplate">
				</div>
				<div class="form-group">
					<label>Search service mapper</label> 
					<span class="glyphicon glyphicon-question-sign" uib-tooltip="When the input is used in a table, this service will be used to resolve the column filter to actual input values. The filter is passed in the body, a list of string is expected as a result (Optional)" tooltip-append-to-body="true"></span>
					<input class="form-control"	ng-model="input.input.searchMapperService">
				</div>
			</div>
		</div>
		
		<input type="submit" style="position: absolute; left: -9999px; width: 1px; height: 1px;" />
	</form>
</div>
<div class="modal-footer">
	<button class="btn btn-primary" type="button" ng-click="save()">Save</button>
	<button class="btn btn-warning" type="button" ng-click="cancel()">Cancel</button>
</div>