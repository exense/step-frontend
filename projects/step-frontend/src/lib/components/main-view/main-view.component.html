<section>
  <step-dashlet id="project-select" itemKey="projectSelect" />
  <step-sidebar />
  <div id="main">
    <header class="app-header">
      <section class="content">
        <div></div>
        <div class="app-header-nav">
          @for (item of navBarRightMenuItems; track item.id) {
            <step-dashlet [itemKey]="item.template" />
          }
          <a class="icon-bookmark" (click)="addBookmark()">
            <step-icon [matTooltip]="'Bookmark this view'" name="bookmark" />
          </a>
          <a href="#" (click)="(false)" [matMenuTriggerFor]="sessionMenu">
            <step-icon name="user" />
            @if (_authService.context$ | async; as ctx) {
              {{ ctx.userID }} [{{ ctx.role }}]
            }
          </a>
        </div>
      </section>
    </header>
    <div class="projects-read-only">
      <div class="message-container">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 24 24"
          fill="none"
          stroke="#ffd119"
          stroke-width="2"
          stroke-linecap="round"
          stroke-linejoin="round"
          width="20"
          height="20"
          class="feather feather-alert-triangle"
        >
          <path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"></path>
          <line x1="12" y1="9" x2="12" y2="13"></line>
          <line x1="12" y1="17" x2="12.01" y2="17"></line>
        </svg>
        <p>All content is read-only until a project is selected</p>
      </div>
    </div>
    <div id="step-main-scrollable-content">
      <step-info-banner />
      <step-dashlet itemKey="projectAlerts" />
      @for (alert of adminAlerts; track alert.id) {
        <step-dashlet [itemKey]="alert.template" />
      }
      <step-alerts-container />
      <div id="mainView">
        <router-outlet />
      </div>
    </div>
  </div>
</section>
<mat-menu #sessionMenu>
  <button type="button" mat-menu-item>
    <step-my-account-button />
  </button>
  @if (_appConfig.conf?.authentication) {
    @if (_authService.isAuthenticated$ | async) {
      <button type="button" mat-menu-item (click)="_authService.logout()">
        <step-icon name="power" />
        Logout
      </button>
    } @else {
      <button type="button" mat-menu-item (click)="_authService.goToLoginPage()">Sign in</button>
    }
  }
</mat-menu>
