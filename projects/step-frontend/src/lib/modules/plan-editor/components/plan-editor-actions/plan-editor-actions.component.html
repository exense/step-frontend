<step-btn-group class="with-borders">
  <button
    *ngIf="hasUndo"
    type="button"
    mat-stroked-button
    [matTooltip]="captions.revertAll"
    matTooltipPosition="below"
    (click)="discardAll.emit()"
  >
    Discard All
  </button>

  <button
    type="button"
    mat-stroked-button
    [disabled]="!hasUndo"
    [matTooltip]="captions.undo"
    matTooltipPosition="below"
    (click)="undo.emit()"
  >
    <step-icon class="icon-flipped" name="rotate-cw"></step-icon>
  </button>

  <button
    type="button"
    mat-stroked-button
    [disabled]="!hasRedo"
    [matTooltip]="captions.redo"
    matTooltipPosition="below"
    (click)="redo.emit()"
  >
    <step-icon name="rotate-cw"></step-icon>
  </button>
  <button
    type="button"
    mat-stroked-button
    (click)="displayHistory.emit()"
    [matTooltip]="captions.history"
    class="history"
    matTooltipPosition="below"
  >
    <step-icon name="git-branch"></step-icon>
  </button>

  <button
    type="button"
    mat-stroked-button
    (click)="clone.emit()"
    [matTooltip]="captions.copy"
    matTooltipPosition="below"
  >
    <step-icon name="copy"></step-icon>
  </button>

  <button
    type="button"
    mat-stroked-button
    (click)="export.emit()"
    [matTooltip]="captions.export"
    matTooltipPosition="below"
  >
    <step-icon name="upload"></step-icon>
  </button>

  <button
    *ngIf="showExecuteButton"
    type="button"
    mat-stroked-button
    color="primary"
    [matMenuTriggerFor]="executionMenu"
    [matTooltip]="captions.start"
    matTooltipPosition="below"
  >
    <step-icon name="play-circle"></step-icon>
  </button>
</step-btn-group>
<step-btn-group class="with-borders">
  <button
    *ngIf="isInteractiveSessionActive"
    type="button"
    mat-stroked-button
    (click)="reset.emit()"
    [matTooltip]="captions.resetInteractive"
    matTooltipPosition="below"
  >
    <step-icon name="refresh-cw"></step-icon>
  </button>

  <button
    type="button"
    mat-stroked-button
    [color]="isInteractiveSessionActive ? 'primary' : undefined"
    (click)="toggleInteractiveSession()"
    [matTooltip]="isInteractiveSessionActive ? captions.stopInteractive : captions.startInteractive"
    matTooltipPosition="below"
  >
    <step-icon name="bug-01"></step-icon>
  </button>
  <span class="interactive-trigger" #interactiveSessionTrigger [matMenuTriggerFor]="interactiveSessionMenu"></span>
</step-btn-group>
<mat-menu #executionMenu="matMenu">
  <span class="plan-execution-menu" mat-menu-item [disableRipple]="true" (click)="$event.stopImmediatePropagation()">
    <step-execution-commands [description]="description" [repositoryObjectRef]="repositoryObjectRef">
    </step-execution-commands>
  </span>
</mat-menu>
<mat-menu #interactiveSessionMenu="matMenu">
  <span class="plan-execution-menu" mat-menu-item [disableRipple]="true" (click)="$event.stopImmediatePropagation()">
    <div class="interactive-parameters">
      <step-custom-forms
        *ngIf="_interactiveSession.executionParameters"
        [stModel]="_interactiveSession.executionParameters"
        stScreen="executionParameters"
      >
      </step-custom-forms>
      <step-btn-group>
        <button
          type="button"
          class="interactive-button"
          mat-button
          (click)="startInteractiveSession()"
          [matTooltip]="captions.startInteractive"
          matTooltipPosition="below"
        >
          <div class="button-content">
            <step-icon name="bug-01"></step-icon>
            <span>{{ captions.startInteractiveShort }}</span>
          </div>
        </button>
      </step-btn-group>
    </div>
  </span>
</mat-menu>
