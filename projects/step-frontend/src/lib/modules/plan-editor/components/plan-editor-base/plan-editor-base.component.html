<div>
  <step-plan-alerts [planContext]="_planEditService.planContext()" />
  @if (showInteractiveWarning$ | async) {
    <step-alert type="info">
      Welcome to the interactive mode. In this mode you can select tree nodes and run them directly by clicking the
      &nbsp;'Run interactively' button
    </step-alert>
  }
  <div class="actions-header">
    <div class="editable-labels">
      @if (planTypes$ | async; as planTypes) {
        <step-editable-dropdown-label [items]="planTypes" [formControl]="planTypeControl" tooltip="Plan type">
          <span *stepEditableLabelTemplate>Plan type</span>
          <div *stepEditableListItemTemplate="let item" class="plan-type-item">
            <step-icon [name]="item.icon" />
            {{ item.planType }}
          </div>
        </step-editable-dropdown-label>
      }
      <ng-content select="step-plan-editor-attributes" />
    </div>
    @if (_planEditService.planContext(); as planContext) {
      <step-plan-editor-actions
        [planContext]="planContext"
        [showExecuteButton]="actionsConfig?.showExecuteButton"
        [showExportSourceButton]="actionsConfig?.showExportSourceButton"
        [hasUndo]="_planEditService.hasUndo()"
        [hasRedo]="_planEditService.hasRedo()"
        [isInteractiveSessionActive]="_interactiveSession.isActive$ | async"
        [repositoryObjectRef]="repositoryObjectRef"
        (discardAll)="_planEditService.discardAll()"
        (undo)="_planEditService.undo()"
        (redo)="_planEditService.redo()"
        (clone)="clonePlan()"
        (export)="exportPlan()"
        (startInteractive)="startInteractive()"
        (reset)="resetInteractive()"
        (stop)="stopInteractive()"
        (showSource)="showPlanSource()"
        (runPlan)="runPlan.emit()"
      />
    }
  </div>

  <section stepDragDropGroupContainer stepDropAreaId="planTree">
    @if (planClass) {
      <step-plan-type [itemKey]="planClass" [context]="{ templateControls: controls }" />
      <ng-template #controls>
        <step-plan-controls #planControls />
      </ng-template>
    }
    <!--
    <step-split stepMaxHeightViewportHeightMinusOffsetTop>
      <step-split-area sizeType="flex" [size]="planSize" (sizeChange)="handlePlanSizeChange($event)">
      </step-split-area>

      <step-split-gutter />

      <step-split-area
        [size]="planControlsSize"
        (sizeChange)="handlePlanControlsChange($event); planControls.updateTabsPagination()"
      >
        <step-plan-controls
          #planControls
          (addControl)="addControl($event)"
          (addKeywords)="addKeywords($event)"
          (addPlans)="addPlans($event)"
        />
      </step-split-area>
    </step-split>
-->
  </section>
</div>
