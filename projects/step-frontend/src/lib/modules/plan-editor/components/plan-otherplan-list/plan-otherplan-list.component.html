<step-drag-drop-container>
  <step-table
    class="paddingless"
    [dataSource]="dataSource"
    matSort
    matSortActive="name"
    matSortDirection="asc"
    [matSortDisableClear]="true"
  >
    <div class="selection-control" *stepAdditionalHeader="'btngroup-bulk-import-create'">
      <step-bulk-selection-di />
      @if (hasSelection$ | async) {
        <button mat-icon-button matTooltip="Add selected plans" (click)="addAllPlans()">
          <step-icon name="plus-circle" />
        </button>
      }
    </div>
    <ng-container matColumnDef="bulkSelection">
      <th mat-header-cell *matHeaderCellDef class="bulk-selection-cell"></th>
      <td mat-cell *matCellDef="let element" class="bulk-selection-cell">
        <step-entity-selection-di [entity]="element" />
      </td>
    </ng-container>
    <ng-container matColumnDef="move">
      <th mat-header-cell *matHeaderCellDef></th>
      <td class="move" mat-cell *matCellDef="let element">
        <step-drag-drop-container stepDropAreaId="planTree">
          <step-icon name="drag-handle" [stepDragItem]="element | planDropInfo" />
          <step-drag-preview>
            <step-plan-nodes-drag-preview />
          </step-drag-preview>
        </step-drag-drop-container>
      </td>
    </ng-container>
    <step-entity-column-container entityName="plans" />
    <ng-container matColumnDef="actions" stepActionCol>
      <th mat-header-cell *matHeaderCellDef>
        <step-column-settings />
      </th>
      <td mat-cell *matCellDef="let element">
        <div class="actions">
          <step-description-hint [description]="element.root.description" />

          <button mat-icon-button matTooltip="Add plan" (click)="addPlan(element.id)">
            <step-icon name="plus-circle"></step-icon>
          </button>
        </div>
      </td>
    </ng-container>
  </step-table>
</step-drag-drop-container>
