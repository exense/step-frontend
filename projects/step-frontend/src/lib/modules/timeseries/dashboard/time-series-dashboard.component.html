<ng-container *ngIf="performanceViewSettings">
  <div>
    <div class="filter-bars-container" [class.compare-mode-enabled]="compareModeEnabled">
      <div class="bar mat-card">
        <step-ts-filter-bar
          *ngIf="context"
          [context]="context"
          [defaultFilterOptions]="settings.filterOptions"
          [initialFilters]="contextualFilterItems"
          (onTimeRangeChange)="handleTimeRangeChange($event)"
          [timeRangeOptions]="settings.timeRangeOptions"
          [activeTimeRange]="settings.activeTimeRange"
          [compactView]="compareModeEnabled"
        >
        </step-ts-filter-bar>
        <div *ngIf="compareModeEnabled" class="stamp">BASE</div>
      </div>
      <div class="bar mat-card" [class]="compareModeEnabled ? 'grow' : 'collapsed'">
        <step-ts-filter-bar
          #compareFilterBar
          *ngIf="compareModeContext"
          [context]="compareModeContext"
          [defaultFilterOptions]="settings.filterOptions"
          [initialFilters]="compareModeContext.getFilteringSettings().filterItems"
          (onTimeRangeChange)="handleCompareTimeRangeChange($event)"
          [timeRangeOptions]="compareModeTimeRangeOptions"
          [activeTimeRange]="compareModeActiveRangeOption"
          [compactView]="compareModeEnabled"
        >
        </step-ts-filter-bar>
        <div *ngIf="compareModeEnabled" class="stamp compare">COMPARE</div>
      </div>
    </div>
  </div>

  <step-charts-view
    [context]="context"
    [settings]="performanceViewSettings"
    [timeSelection]="filterBar?.timeSelection"
  ></step-charts-view>
</ng-container>
