<step-execution-tabs></step-execution-tabs>

<div>
  <step-ts-ranger
    #ranger
    *ngIf="rangerSettings"
    [settings]="rangerSettings"
    [syncKey]="syncKey"
    (onRangeChange)="onRangeChange($event)"
  >
  </step-ts-ranger>
</div>
<div class="w-100 dashboard-container">
  <div class="chart-container">
    <step-timeseries-chart
      *ngIf="chart1Settings"
      [settings]="chart1Settings"
      [syncKey]="syncKey"
      (onZoomReset)="onZoomReset()"
    >
    </step-timeseries-chart>
  </div>
  <div class="chart-container" *ngIf="chart2Settings">
    <step-timeseries-chart [settings]="chart2Settings" [syncKey]="syncKey" (onZoomReset)="onZoomReset()">
    </step-timeseries-chart>
  </div>

  <div class="chart-container" *ngIf="chart3Settings">
    <step-timeseries-chart [settings]="chart3Settings" [syncKey]="syncKey" (onZoomReset)="onZoomReset()">
    </step-timeseries-chart>
  </div>

  <div class="chart-container">
    <step-timeseries-chart
      #chart5
      *ngIf="responseTypeByKeywordsSettings"
      [settings]="responseTypeByKeywordsSettings"
      [syncKey]="syncKey"
      (onZoomReset)="onZoomReset()"
    >
    </step-timeseries-chart>
    <div class="chart-footer-actions">
      <span>AVG</span>
      <span>MIN</span>
      <span>MAX</span>
    </div>
  </div>

  <div class="chart-container" *ngIf="chart4Settings">
    <step-timeseries-chart #chart4 [settings]="chart4Settings" [syncKey]="syncKey" (onZoomReset)="onZoomReset()">
    </step-timeseries-chart>
  </div>

  <div class="chart-container">
    <step-timeseries-chart
      #chart6
      [settings]="chart6Settings"
      *ngIf="chart6Settings"
      [syncKey]="syncKey"
      (onZoomReset)="onZoomReset()"
    >
    </step-timeseries-chart>
  </div>

  <div class="chart-container" *ngIf="chart4Settings">
    <input [(ngModel)]="keywordSearchValue" placeholder="Search" />
    <div *ngFor="let item of keywords | keyvalue: valueAscOrder">
      <ng-container *ngIf="!keywordSearchValue || item.key.toLowerCase().indexOf(keywordSearchValue) >= 0">
        <div class="color-cell">
          <input
            type="checkbox"
            [(ngModel)]="item.value.isSelected"
            class="checkbox"
            (change)="onKeywordToggle(item.key)"
          />
          <span class="color-square" [style.background-color]="item.value.color"></span>
          <span>{{ item.key }}</span>
        </div>
      </ng-container>
    </div>
  </div>

  <div class="chart-container">
    <step-timeseries-table
      #tableChart
      [colorsPool]="colorsPool"
      (onKeywordsFetched)="onKeywordsFetched($event)"
    ></step-timeseries-table>
  </div>

  <div class="chart-container pie-chart-container"></div>
</div>
