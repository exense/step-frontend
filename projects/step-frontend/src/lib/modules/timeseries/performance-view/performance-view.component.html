<div class="page-container">
  <div class="view-content">
    <step-execution-filters *ngIf="executionContext" [executionContext]="executionContext"></step-execution-filters>
    <step-execution-time-selection
      [timePicker]="includeTimeRangePicker"
      (onRangerLoaded)="onRangerLoaded()"
      #timeSelection
      *ngIf="executionContext"
      [settings]="settings"
    >
    </step-execution-time-selection>
    <div style="height: 12px; opacity: 0.1">
      <mat-progress-bar *ngIf="chartsAreLoading" style="height: 12px" [mode]="'indeterminate'"></mat-progress-bar>
    </div>

    <div class="w-100 dashboard-container">
      <div class="chart-container chart">
        <step-chart-skeleton *ngIf="!chartsSettings[TsChartType.OVERVIEW]"></step-chart-skeleton>
        <step-timeseries-chart
          #summaryChart
          *ngIf="chartsSettings[TsChartType.OVERVIEW]"
          [settings]="chartsSettings[TsChartType.OVERVIEW]"
          [syncKey]="settings.contextId"
          [selection]="timeSelection?.absoluteSelection"
          (onZoomReset)="onZoomReset()"
        >
        </step-timeseries-chart>
      </div>

      <div class="chart-container chart">
        <step-chart-skeleton *ngIf="!byStatusSettings"></step-chart-skeleton>
        <step-timeseries-chart
          #byStatusChart
          *ngIf="byStatusSettings"
          [settings]="byStatusSettings"
          [selection]="timeSelection?.absoluteSelection"
          [syncKey]="settings.contextId"
          (onZoomReset)="onZoomReset()"
        >
        </step-timeseries-chart>
      </div>

      <div class="charts-section">
        <div class="chart-container chart">
          <div class="settings-container" *ngIf="responseTypeByKeywordsSettings">
            <button mat-icon-button matTooltip="Change Metrics" [matMenuTriggerFor]="menu">
              <step-icon name="bar-chart-2"></step-icon>
              <mat-menu #menu="matMenu">
                <button mat-menu-item *ngFor="let metric of responseTimeMetrics" (click)="switchChartMetric(metric)">
                  {{ metric.label }}
                </button>
              </mat-menu>
            </button>
            <step-measurements-picker
              *ngIf="settings.contextId"
              [contextId]="settings.contextId"
            ></step-measurements-picker>
          </div>
          <step-chart-skeleton *ngIf="!responseTypeByKeywordsSettings"></step-chart-skeleton>
          <step-timeseries-chart
            #responseTimeChart
            *ngIf="responseTypeByKeywordsSettings"
            [settings]="responseTypeByKeywordsSettings"
            [selection]="timeSelection?.absoluteSelection"
            [syncKey]="settings.contextId"
            (onZoomReset)="onZoomReset()"
          >
          </step-timeseries-chart>
        </div>

        <div class="chart-container chart">
          <div class="settings-container" *ngIf="throughputChartSettings">
            <step-measurements-picker
              *ngIf="settings.contextId"
              [contextId]="settings.contextId"
            ></step-measurements-picker>
          </div>
          <step-chart-skeleton *ngIf="!throughputChartSettings"></step-chart-skeleton>
          <step-timeseries-chart
            *ngIf="throughputChartSettings"
            #throughputChart
            [settings]="throughputChartSettings"
            [selection]="timeSelection?.absoluteSelection"
            [syncKey]="settings.contextId"
            (onZoomReset)="onZoomReset()"
          >
          </step-timeseries-chart>
        </div>

        <div class="chart-container" style="width: 100%">
          <step-timeseries-table
            #tableChart
            *ngIf="executionContext"
            (onInitializationComplete)="onTableInitializationFinished()"
            [findRequest]="findRequest"
            [executionContext]="executionContext"
          ></step-timeseries-table>
        </div>
      </div>

      <div class="chart-container chart" *ngIf="includeThreadGroupChart">
        <step-chart-skeleton *ngIf="!threadGroupSettings"></step-chart-skeleton>
        <step-timeseries-chart
          *ngIf="threadGroupSettings"
          #threadGroupChart
          [settings]="threadGroupSettings"
          [selection]="timeSelection?.absoluteSelection"
          [syncKey]="settings.contextId"
          (onZoomReset)="onZoomReset()"
        >
        </step-timeseries-chart>
      </div>
    </div>
  </div>
  <!--  <div class="side-panel" *ngIf="false">-->
  <!--    <div class="container chart" *ngIf="throughputChartSettings" style="overflow: auto">-->
  <!--      <div>-->
  <!--        <input-->
  <!--          type="checkbox"-->
  <!--          class="checkbox"-->
  <!--          [(ngModel)]="allSeriesChecked"-->
  <!--          (change)="onAllSeriesCheckboxClick($event)"-->
  <!--          style="display: inline"-->
  <!--        />-->
  <!--        <input [(ngModel)]="keywordSearchValue" placeholder="Search" style="width: 110px; margin-bottom: 12px" />-->
  <!--      </div>-->

  <!--      <div *ngFor="let item of keywords | keyvalue: valueAscOrder">-->
  <!--        <ng-container *ngIf="!keywordSearchValue || item.key.toLowerCase().indexOf(keywordSearchValue) >= 0">-->
  <!--          <div class="color-cell">-->
  <!--            <input-->
  <!--              type="checkbox"-->
  <!--              [ngModel]="item.value.isSelected"-->
  <!--              class="checkbox"-->
  <!--              (change)="onKeywordToggle(item.key, $event)"-->
  <!--            />-->
  <!--            <span class="color-square" [style.background-color]="item.value.color"></span>-->
  <!--            <span>{{ item.key }}</span>-->
  <!--          </div>-->
  <!--        </ng-container>-->
  <!--      </div>-->
  <!--    </div>-->
  <!--    <step-execution-filters *ngIf="executionId" [executionId]="executionId"></step-execution-filters>-->
  <!--  </div>-->
</div>
