<div class="filters">
  <button type="button" mat-raised-button color="primary" [matMenuTriggerFor]="menu">Add Filter</button>

  <mat-menu #menu="matMenu">
    <button mat-menu-item *ngFor="let option of defaultFilterOptions" (click)="addFilterItem(option)">
      <span>{{ option.label }}</span>
    </button>

    <button mat-menu-item [matMenuTriggerFor]="typesMenu">
      <span>Other</span>
    </button>

    <button mat-menu-item disabled>
      <span>OQL</span>
    </button>
  </mat-menu>

  <mat-menu #typesMenu="matMenu">
    <button mat-menu-item (click)="addCustomFilter(FilterBarItemType.FREE_TEXT)">Text Filter</button>
    <button mat-menu-item (click)="addCustomFilter(FilterBarItemType.NUMERIC)">Numeric Filter</button>
    <button mat-menu-item (click)="addCustomFilter(FilterBarItemType.DATE)">Date Filter</button>
  </mat-menu>

  <div class="applied-filters" (stepElementResize)="initMoreFilters()">
    <step-ts-filter-bar-item
      *ngFor="let filters of filters; let i = index"
      #appliedFilter
      [item]="filters"
      (onRemoveItem)="removeFilterItem(i)"
      (onFilterChange)="handleFilterChange()"
    >
    </step-ts-filter-bar-item>
  </div>

  <step-timeseries-grouping (onGroupingChange)="onGroupingChange.emit($event)"></step-timeseries-grouping>
</div>

<div *ngIf="moreFilters.length" class="more-applied-filters">
  <step-ts-filter-bar-item
    *ngFor="let filter of moreFilters; let i = index"
    [item]="filter"
    (onRemoveItem)="removeFilterItem(i)"
    (onFilterChange)="handleFilterChange()"
  >
  </step-ts-filter-bar-item>
</div>

<step-execution-time-selection [settings]="performanceViewSettings"></step-execution-time-selection>
