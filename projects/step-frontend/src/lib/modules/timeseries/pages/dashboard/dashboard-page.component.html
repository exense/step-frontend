<div *ngIf="dashboard" style="margin: 12px">
  <div class="header-container">
    <div>Here we have settings</div>
    <div>
      <ng-container *ngIf="!editMode">
        <button (click)="enableEditMode()">Edit</button>
        <span>{{ dashboard.name }}</span>
      </ng-container>
      <ng-container *ngIf="editMode">
        <button (click)="saveEditChanges()">Save</button>
        <button (click)="disableEditMode()">Cancel</button>
        <input [(ngModel)]="dashboard.name" />
      </ng-container>
    </div>
  </div>

  <div>
    <step-ts-dashboard-filter-bar
      *ngIf="context"
      [context]="context"
      [filters]="dashboard.filters || []"
      (onTimeRangeChange)="handleTimeRangeChange($event)"
      [timeRangeOptions]="timeRangeOptions"
      [activeTimeRange]="timeRangeSelection"
      [compactView]="compareModeEnabled"
    >
    </step-ts-dashboard-filter-bar>
  </div>

  <div style="width: 100%; flex-direction: row; flex-wrap: wrap; display: flex; justify-content: space-between">
    <div
      *ngFor="let dashlet of dashboard.dashlets; let i = index"
      class="dashlet"
      [style.width]="dashlet.size === 2 ? '100%' : '50%'"
    >
      <step-chart-dashlet
        [editMode]="editMode"
        [item]="dashlet"
        [context]="context"
        [height]="DASHLET_HEIGHT"
        (remove)="handleChartDelete(i)"
        (shiftLeft)="handleChartShiftLeft(i)"
        (shiftRight)="handleChartShiftRight(i)"
      ></step-chart-dashlet>
    </div>
    <div *ngIf="editMode" class="add-dashlet-container" [style.height]="DASHLET_HEIGHT + 'px'">
      <div id="add-custom-chart" *ngIf="metricTypes" [matMenuTriggerFor]="menu">
        <span>+ Add Chart</span>
        <mat-menu #menu="matMenu">
          <button *ngFor="let metric of metricTypes" mat-menu-item (click)="addDashlet(metric)">
            {{ metric.displayName }}
          </button>
        </mat-menu>
      </div>
    </div>
  </div>
</div>
