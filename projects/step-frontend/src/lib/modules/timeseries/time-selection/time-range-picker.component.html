<div>
  <button
    mat-raised-button
    [matMenuTriggerFor]="menu"
    [title]="compact ? 'Time Range' : ''"
    [class.compact-btn]="compact"
  >
    <ng-container *ngIf="!compact">
      {{ activeSelection.type === RangeSelectionType.FULL ? 'Full time range' : '' }}
      {{ activeSelection.type === RangeSelectionType.RELATIVE ? activeSelection.relativeSelection!.label : '' }}
      {{ activeSelection.type === RangeSelectionType.ABSOLUTE ? 'Custom Selection' : '' }}
    </ng-container>
    <step-icon name="clock" *ngIf="compact"></step-icon>
  </button>
  <mat-menu #menu="matMenu" class="time-selector-menu">
    <div (click)="$event.stopPropagation()">
      <div class="time-selector-container">
        <div class="left-section">
          <div class="title bottom-gap">Absolute time range</div>
          <div class="bottom-gap">
            <step-form-field>
              <step-label>From</step-label>
              <input type="text" [(ngModel)]="fromDateString" />
              <step-suffix class="icon-suffix">
                <step-icon name="calendar" (click)="fromPicker.open()"></step-icon>
              </step-suffix>
            </step-form-field>
            <input class="hidden-input" [stepDatePicker]="fromPicker" (dateChange)="setFromDate($event)" />
            <step-date-picker #fromPicker></step-date-picker>
          </div>
          <div class="bottom-gap">
            <step-form-field>
              <step-label>To</step-label>
              <input type="text" [(ngModel)]="toDateString" />
              <step-suffix class="icon-suffix">
                <step-icon name="calendar" (click)="toPicker.open()"></step-icon>
              </step-suffix>
            </step-form-field>
            <input class="hidden-input" [stepDatePicker]="toPicker" (dateChange)="setToDate($event)" />
            <step-date-picker #toPicker></step-date-picker>
          </div>
          <button (click)="applyAbsoluteInterval()" mat-raised-button color="primary">Apply time range</button>
        </div>
        <div class="right-section" (click)="closeMenu()">
          <div class="title">Relative time ranges</div>
          <div
            *ngFor="let rangeOption of selectOptions"
            (click)="onRelativeSelectionSelected(rangeOption)"
            class="time-option"
            [class.active]="rangeOption.relativeSelection?.timeInMs === activeSelection.relativeSelection?.timeInMs"
          >
            {{ rangeOption.relativeSelection?.label }}
            {{ rangeOption.type === RangeSelectionType.FULL ? 'Full Range' : '' }}
          </div>
        </div>
      </div>
      <div class="timezone-container">
        <div>Europe/Zurich</div>
        <div>
          <span class="tz-label">UTC+02:00</span>
          <button mat-raised-button>Change time zone</button>
        </div>
      </div>
    </div>
  </mat-menu>
</div>
