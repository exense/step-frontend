<div>
  <button mat-raised-button [matMenuTriggerFor]="menu">
    {{ activeSelection.type === RangeSelectionType.FULL ? 'Full time range' : '' }}
    {{ activeSelection.type === RangeSelectionType.RELATIVE ? activeSelection?.relativeSelection?.label : '' }}
    {{ activeSelection.type === RangeSelectionType.ABSOLUTE ? 'Custom Selection' : '' }}
  </button>
  <mat-menu #menu="matMenu" class="time-selector-menu">
    <div (click)="$event.stopPropagation()">
      <div class="time-selector-container">
        <div class="left-section">
          <div class="title bottom-gap">Absolute time range</div>
          <div class="bottom-gap">
            <step-input-group>
              <label>From</label>
              <input type="text" [(ngModel)]="fromDateString" />
              <div class="step-input-addon">
                <step-icon name="calendar" (click)="fromPicker.open()"></step-icon>
              </div>
            </step-input-group>
            <input class="hidden-input" [matDatepicker]="fromPicker" (dateChange)="setFromDate($event)" />
            <mat-datepicker #fromPicker disabled="false"></mat-datepicker>
          </div>
          <div class="bottom-gap">
            <step-input-group>
              <label>To</label>
              <input type="text" [(ngModel)]="toDateString" />
              <div class="step-input-addon">
                <step-icon name="calendar" (click)="toPicker.open()"></step-icon>
              </div>
            </step-input-group>
            <input class="hidden-input" [matDatepicker]="toPicker" (dateChange)="setToDate($event)" />
            <mat-datepicker #toPicker disabled="false"></mat-datepicker>
          </div>
          <button (click)="applyAbsoluteInterval()" mat-raised-button color="primary">Apply time range</button>
        </div>
        <div class="right-section" (click)="closeMenu()">
          <div class="title">Relative time ranges</div>
          <div
            *ngFor="let rangeOption of customRelativeOptions || defaultRelativeOptions"
            (click)="onRelativeSelectionSelected(rangeOption)"
            class="time-option"
            [class.active]="rangeOption.timeInMs === activeSelection.relativeSelection?.timeInMs"
          >
            {{ rangeOption.label }}
          </div>
          <div
            *ngIf="includeFullRangeOption"
            (click)="onFullRangeSelect()"
            class="time-option"
            [class.active]="activeSelection.type === RangeSelectionType.FULL"
          >
            Full Range
          </div>
        </div>
      </div>
      <div class="timezone-container">
        <div>Europe/Zurich</div>
        <div>
          <span class="tz-label">UTC+02:00</span>
          <button mat-raised-button>Change time zone</button>
        </div>
      </div>
    </div>
  </mat-menu>
</div>
