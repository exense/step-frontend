@for (agr of AGGREGATES; track agr) {
  <button
    (click)="switchAggregate(selectedAggregate)"
    mat-menu-item
    class="selected-menu-item"
    [class.selected-menu-item]="agr === selectedAggregate"
  >
    {{ selectedAggregate }}
  </button>
}
<button mat-menu-item [class.selected-menu-item]="selectedAggregate === ChartAggregation.PERCENTILE">PERCENTILE</button>
<mat-menu #pclMenu="matMenu">
  @for (pcl of PCL_VALUES; track pcl) {
    <button
      (click)="switchAggregate(ChartAggregation.PERCENTILE, pcl)"
      [class.selected-menu-item]="selectedAggregate === ChartAggregation.PERCENTILE && pclValue === pcl"
      mat-menu-item
    >
      {{ pcl }}th
    </button>
  }
  <div class="custom-pcl-container" (click)="$event.stopPropagation()">
    <step-form-field>
      <input
        placeholder="other"
        autocomplete="one-time-code"
        type="number"
        [(ngModel)]="customPclValueInput"
        (keydown)="$event.stopPropagation()"
      />
    </step-form-field>
    <button
      (click)="applyCustomPclValue()"
      mat-button
      color="primary"
      [disabled]="!customPclValueInput || !(customPclValueInput > 0 && customPclValueInput < 100)"
    >
      Apply
    </button>
  </div>
</mat-menu>
