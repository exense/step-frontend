<section class="header">
  <step-btn-group>
    <button
      type="button"
      mat-icon-button
      class="primary"
      matTooltip="New Task"
      matTooltipPosition="below"
      [disabled]="!('user-write' | hasRight | async)"
      (click)="_logic.createParameter()"
    >
      <mat-icon>add</mat-icon>
    </button>
  </step-btn-group>

  <button
    type="button"
    mat-icon-button
    matTooltip="Configure Scheduler"
    matTooltipPosition="below"
    [disabled]="!('plan-write' | hasRight | async)"
    (click)="_logic.navToSettings()"
  >
    <mat-icon>settings</mat-icon>
  </button>
</section>
<step-table
  [dataSource]="_logic.searchableScheduledTask$"
  [inProgress]="_logic.inProgress"
  matSort
  [matSortDisableClear]="true"
  (onReload)="_logic.loadTable()"
>
  <step-bulk-operations *stepAdditionalHeader [availableOperations]="availableBulkOperations"> </step-bulk-operations>
  <ng-container matColumnDef="bulkSelection">
    <th mat-header-cell *matHeaderCellDef class="bulk-selection-cell"></th>
    <td mat-cell *matCellDef="let element">
      <step-entity-selection-di [entity]="element"></step-entity-selection-di>
    </td>
  </ng-container>
  <step-custom-columns screen="schedulerTable"> </step-custom-columns>
  <ng-container matColumnDef="cronExpression" stepSearchCol>
    <th mat-header-cell *matHeaderCellDef mat-sort-header>CronExpression</th>
    <td mat-cell *matCellDef="let element">{{ element.cronExpression }}</td>
  </ng-container>
  <ng-container matColumnDef="status" stepSearchCol>
    <th mat-header-cell *matHeaderCellDef mat-sort-header>Status</th>
    <td mat-cell *matCellDef="let element">
      <span class="status" [class]="element.active ? 'status-on' : 'status-off'" (click)="_logic.switchActive(element)">
        {{ element.active ? _logic.STATUS_ACTIVE_STRING : _logic.STATUS_INACTIVE_STRING }}
      </span>
    </td>
  </ng-container>
  <ng-container matColumnDef="actions">
    <th mat-header-cell *matHeaderCellDef>Actions</th>
    <td mat-cell *matCellDef="let element" class="cell-actions">
      <step-btn-group>
        <button
          mat-icon-button
          matTooltip="Execute"
          [disabled]="!('user-write' | hasRight | async)"
          (click)="_logic.executeParameter(element)"
        >
          <mat-icon>play_arrow</mat-icon>
        </button>
        <button
          mat-icon-button
          matTooltip="Edit"
          [disabled]="!('user-write' | hasRight | async)"
          (click)="_logic.editParameter(element)"
        >
          <mat-icon>edit</mat-icon>
        </button>
        <button
          mat-icon-button
          matTooltip="Delete"
          [disabled]="!('user-write' | hasRight | async)"
          (click)="_logic.deletePrameter(element)"
        >
          <mat-icon>delete</mat-icon>
        </button>
        <button
          mat-icon-button
          matTooltip="Analyze performance in interactive session"
          [disabled]="!('user-write' | hasRight | async)"
          (click)="_logic.navToStats(element)"
        >
          <mat-icon>trending_up</mat-icon>
        </button>
      </step-btn-group>
    </td>
  </ng-container>
</step-table>
