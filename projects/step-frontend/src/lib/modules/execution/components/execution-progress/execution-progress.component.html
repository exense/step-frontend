<section *ngIf="execution?.importResult && !execution!.importResult!.successful">
  <div class="alert alert-danger" role="alert">
    <step-icon name="help-circle" aria-hidden="true"></step-icon>
    Error while importing plan:
    <ul>
      <li *ngFor="let error of execution?.importResult?.errors">{{ error }}</li>
    </ul>
  </div>
</section>
<section *ngIf="execution">
  <as-split direction="horizontal">
    <as-split-area [size]="75">
      <div class="tab-panel">
        <step-tabs [tabs]="tabs" [activeTabId]="activeTabId" (activeTabIdChange)="selectTab($event)"> </step-tabs>
        <step-btn-group>
          <step-autorefresh-toggle
            [(disabled)]="autoRefreshDisabled"
            [interval]="autoRefreshInterval"
            [autoIncreaseTo]="autoRefreshIncreasedTo"
            (refresh)="refresh()"
          >
          </step-autorefresh-toggle>
        </step-btn-group>
      </div>
      <div class="tab-content">
        <div class="tab-pane" *ngFor="let tab of tabs" [class.active]="tab.id === activeTabId">
          <step-dashlet *ngIf="tab | includeTab: activeTabId" [itemKey]="tab.template"> </step-dashlet>
        </div>
      </div>
    </as-split-area>
    <as-split-area [size]="25">
      <mat-accordion multi>
        <mat-expansion-panel [expanded]="true" togglePosition="before">
          <mat-expansion-panel-header>
            <mat-panel-title></mat-panel-title>
          </mat-expansion-panel-header>
          <ng-container *ngIf="execution">
            <step-execution-commands
              [description]="execution.description"
              [repositoryObjectRef]="execution!.executionParameters!.repositoryObject"
              [includedTestcases]="includedTestcases$ | async"
              [execution]="execution"
              (onExecute)="close.emit(eId)"
            >
            </step-execution-commands>
          </ng-container>
        </mat-expansion-panel>

        <step-panel-execution-details> </step-panel-execution-details>

        <!--todo custom panels-->
        <ng-container *ngFor="let customPanel of _executionPanels.customPanels; trackBy: trackByItemInfo">
          <step-panel [panelType]="customPanel.type">
            <step-execution-custom-panel [itemKey]="customPanel.type" [context]="execution">
            </step-execution-custom-panel>
          </step-panel>
        </ng-container>
        <step-panel-operations> </step-panel-operations>

        <!--todo charts-->
      </mat-accordion>
    </as-split-area>
  </as-split>
</section>
