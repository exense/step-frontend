<mat-accordion multi>
  <ng-container *ngIf="panelTestCases?.enabled">
    <mat-expansion-panel
      [attr.id]="eId | panelId: ID_TEST_CASES"
      [(expanded)]="panelTestCases!.show"
      togglePosition="before"
    >
      <mat-expansion-panel-header>
        <mat-panel-title>
          {{ panelTestCases!.label }}
        </mat-panel-title>
        <step-status-distribution
          *ngIf="execution!.status != 'ENDED' && testCasesProgress!.countForecast > 0"
          class="progress-distribution"
          [summary]="testCasesProgress"
          [isProgress]="true"
        >
        </step-status-distribution>
        <step-status-distribution [summary]="testCasesProgress"> </step-status-distribution>
      </mat-expansion-panel-header>
      <step-btn-group>
        <button type="button" mat-flat-button (click)="unselectAllTestCases()">Unselect all</button>
        <button type="button" mat-flat-button (click)="selectAllTestCases()">Select all</button>
      </step-btn-group>
      <step-table [dataSource]="testCases">
        <ng-container matColumnDef="name" stepSearchCol>
          <th mat-header-cell *matHeaderCellDef>Name</th>
          <td mat-cell *matCellDef="let element">
            <a href="#" matTooltip="Drilldown" (click)="chooseTestcase(element); (false)">
              {{ element.name }}
            </a>
          </td>
        </ng-container>
        <ng-container matColumnDef="currentOperations" stepSearchCol>
          <th mat-header-cell *matHeaderCellDef>Current operations</th>
          <td mat-cell *matCellDef>
            <!--todo add current operations-->
          </td>
        </ng-container>
        <ng-container matColumnDef="status" stepSearchCol>
          <th mat-header-cell *matHeaderCellDef>Status</th>
          <td mat-cell *matCellDef="let element">
            {{ element.status }}
          </td>
        </ng-container>
        <ng-container matColumnDef="selection">
          <th mat-header-cell *matHeaderCellDef></th>
          <td mat-cell *matCellDef="let element">
            <step-entity-selection [entity]="element" [selectionCollector]="testCasesSelection">
            </step-entity-selection>
          </td>
        </ng-container>
      </step-table>
    </mat-expansion-panel>
  </ng-container>

  <ng-container *ngIf="panelSteps?.enabled">
    <mat-expansion-panel [attr.id]="eId | panelId: ID_STEPS" [(expanded)]="panelSteps!.show" togglePosition="before">
      <mat-expansion-panel-header>
        <mat-panel-title>
          {{ panelSteps!.label }}
        </mat-panel-title>
      </mat-expansion-panel-header>
      <div>Steps Panel content</div>
    </mat-expansion-panel>
  </ng-container>

  <ng-container *ngIf="panelParameters?.enabled">
    <mat-expansion-panel
      [attr.id]="eId | panelId: ID_PARAMETERS"
      [(expanded)]="panelParameters!.show"
      togglePosition="before"
    >
      <mat-expansion-panel-header>
        <mat-panel-title>
          {{ panelParameters!.label }}
        </mat-panel-title>
      </mat-expansion-panel-header>
      <div>Parameters content</div>
    </mat-expansion-panel>
  </ng-container>
</mat-accordion>
