<step-modal-window>
  <div class="tree-node-modal-header" step-modal-window-title>
    @if (selectedReportNode() && hasBackButton) {
      <button
        type="button"
        mat-icon-button
        (click)="selectedReportNode.set(undefined)"
        matTooltip="Back to iteration's list"
        matTooltipPosition="below"
      >
        <step-icon name="arrow-left" />
      </button>
    }
    <span>{{ title() }}</span>
  </div>
  <div step-modal-window-body>
    @if (hasData) {
      @if (selectedReportNode(); as reportNode) {
        <step-alt-report-node-details [node]="reportNode" [showArtefact]="true" />
      } @else {
        <step-aggregated-tree-node-iteration-list
          [node]="aggregatedNode!"
          [initialStatus]="initialSearchStatus"
          (showDetails)="selectedReportNode.set($event)"
        />
      }
    }
  </div>
</step-modal-window>
