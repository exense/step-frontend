<step-alt-report-widget title="Execution tree" [applyOverflow]="true">
  <step-alt-report-widget-filter>
    <step-btn-group class="with-round-borders shrink">
      <button
        type="button"
        mat-stroked-button
        (click)="collapseAll()"
        matTooltip="Collapse All"
        matTooltipPosition="below"
      >
        <step-icon name="collapse-all" />
      </button>
      <button type="button" mat-stroked-button (click)="expandAll()" matTooltip="Expand All" matTooltipPosition="below">
        <step-icon name="expand-all" />
      </button>
    </step-btn-group>
    <step-alt-report-node-artefact-filter />
    <step-alt-report-node-status-filter />
    <step-search-field
      [formControl]="searchCtrl"
      [(searchIndex)]="pageIndex"
      [total]="foundItems()"
      [hint]="_treeSearchDescription"
      [disableNavButtonsWithControl]="false"
    >
      <ng-container *stepSearchFieldAddon>
        @if (searchForErrorCause()) {
          <button
            type="button"
            mat-flat-button
            (click)="exitRootCauseSearch()"
            matTooltip="Cancel root cause error search"
            matTooltipPosition="below"
          >
            <step-icon name="x" />
          </button>
        } @else {
          <button
            type="button"
            mat-flat-button
            [color]="searchForErrorsOnly() ? 'primary' : undefined"
            (click)="toggleErrorSearch()"
            [matTooltip]="searchForErrorsOnly() ? 'Cancel errors search' : 'Search for errors'"
            matTooltipPosition="below"
          >
            <step-icon name="search-errors" />
          </button>
        }
      </ng-container>
    </step-search-field>
  </step-alt-report-widget-filter>
  <step-alt-report-widget-content>
    <step-alt-execution-tree
      #tree
      stepTreeAutoChooseVirtualScroll="340px"
      [applyVirtualScrollFrom]="150"
      [showSpinnerWhileTreeInitialize]="true"
    />
  </step-alt-report-widget-content>
</step-alt-report-widget>
