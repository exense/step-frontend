@if (showSpinner()) {
  <div class="spinner-container">
    <mat-spinner />
  </div>
}
<section class="controls-container">
  <div class="controls">
    <step-search-field
      [formControl]="searchCtrl"
      [total]="foundItems()"
      [(searchIndex)]="pageIndex"
      [hint]="_treeSearchDescription"
      [disableNavButtonsWithControl]="false"
    >
      <ng-container *stepSearchFieldAddon>
        @if (searchForErrorCause()) {
          <button
            type="button"
            mat-flat-button
            (click)="exitRootCauseSearch()"
            matTooltip="Cancel root cause error search"
            matTooltipPosition="below"
          >
            <step-icon name="x" />
          </button>
        } @else {
          <button
            type="button"
            mat-flat-button
            [color]="searchForErrorsOnly() ? 'primary' : undefined"
            (click)="toggleErrorSearch()"
            [matTooltip]="searchForErrorsOnly() ? 'Cancel errors search' : 'Search for errors'"
            matTooltipPosition="below"
          >
            <step-icon name="search-errors" />
          </button>
        }
      </ng-container>
    </step-search-field>
  </div>
</section>
<step-alt-execution-tree #tree>
  <ng-container *stepAltExecutionTreeNodeAddon="let node; let isSelected = isSelected">
    @if (showDetailsButton() && !(node | isEmptyStatus) && !(node | isCurrentReportDetailsOpened)) {
      <button
        mat-icon-button
        type="button"
        class="details-button"
        [class.selected]="isSelected"
        matTooltip="Open details for this node"
        matTooltipPosition="below"
        (click)="openDetails(node)"
      >
        <step-icon name="microscope" />
      </button>
    }
  </ng-container>
</step-alt-execution-tree>
