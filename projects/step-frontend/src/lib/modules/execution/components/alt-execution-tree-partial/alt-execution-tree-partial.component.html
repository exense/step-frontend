@if (showSpinner()) {
  <div class="spinner-container">
    <mat-spinner />
  </div>
}
<section class="controls-container">
  <div class="controls">
    <step-search-field
      [formControl]="_treeSearch.searchCtrl"
      [(searchIndex)]="_treeSearch.pageIndex"
      [total]="_treeSearch.foundItems()"
      [hint]="_treeSearchDescription"
    />
    <step-search-paginator
      [isActive]="_treeSearch.isErrorSearchActive()"
      (isActiveChange)="_treeSearch.toggleIsErrorSearchActive()"
      [(searchIndex)]="_treeSearch.pageIndex"
      [total]="_treeSearch.foundItems()"
      inactiveTooltip="Search for errors"
      activeTooltip="Close error search"
      [hintTooltip]="_treeSearch.errorsSearchHint()"
      prevTooltip="show previous error"
      nextTooltip="show next error"
    />
  </div>
</section>
<step-alt-execution-tree #tree>
  <ng-container *stepAltExecutionTreeNodeAddon="let node; let isSelected = isSelected">
    @if (showDetailsButton() && !(node | isEmptyStatus) && !(node | isCurrentReportDetailsOpened)) {
      <button
        mat-icon-button
        type="button"
        class="details-button"
        [class.selected]="isSelected"
        matTooltip="Open details for this node"
        matTooltipPosition="below"
        (click)="openDetails(node)"
      >
        <step-icon name="microscope" />
      </button>
    }
  </ng-container>
</step-alt-execution-tree>
