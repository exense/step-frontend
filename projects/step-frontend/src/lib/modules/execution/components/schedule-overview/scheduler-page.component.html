<section class="header" [class.small-screen]="!!(_isSmallScreen$ | async)">
  @if (task(); as task) {
    <div class="title">
      <h3 data-step-testid>
        <entity-icon entityName="tasks" [entity]="task"></entity-icon>

        <div>{{ task.attributes?.['name'] }}</div>
        <!--        @if (execution.executionParameters?.repositoryObject; as repositoryParams) {-->
        <!--          @if (repositoryParams.repositoryID !== 'local') {-->
        <!--            <step-alt-execution-repository [repositoryParams]="repositoryParams" />-->
        <!--          }-->
        <!--        }-->
        <!--        @if (!execution?.executionParameters?.['isolatedExecution'] && !!execution?.planId) {-->
        <!--          <a-->
        <!--            class="plan-link"-->
        <!--            routerLink="/plans/editor/{{ execution.planId }}"-->
        <!--            matTooltip="Navigate to plan"-->
        <!--            matTooltipPosition="right"-->
        <!--          >-->
        <!--            <step-icon name="external-link" />-->
        <!--          </a>-->
        <!--        }-->
      </h3>
    </div>
    <div class="controls">
      <step-autorefresh-toggle
        [interval]="refreshInterval()"
        (refresh)="triggerRefresh()"
        (intervalChange)="handleRefreshIntervalChange($event)"
      />
      @if (activeTimeRangeSelection()) {
        <div class="range-picker">
          <step-time-range-picker
            (selectionChange)="handleTimeRangeChange($event)"
            [selectOptions]="timeRangeOptions"
            [activeSelection]="activeTimeRangeSelection()!"
          />
        </div>
      }
    </div>
  }
</section>

<section class="main tabs-container">
  <step-tabs [tabs]="tabs" [userRouteLinks]="true" />
  <router-outlet />
</section>
