<div class="container">
  <step-alt-report-widget title="Success Rate" style="min-height: unset" class="summary-card">
    <step-alt-report-widget-content>
      <div class="card-value">
        @if (successRateValue$ | async; as data) {
          @if (_state.successRateValueLoading() && displayLoadingOnProgress()) {
            <ng-container *ngTemplateOutlet="loadingSpinner" />
          } @else {
            {{ data }}
          }
        } @else {
          <ng-container *ngTemplateOutlet="loadingSpinner" />
        }
      </div>
    </step-alt-report-widget-content>
  </step-alt-report-widget>

  <step-alt-report-widget title="Average Execution Duration" style="min-height: unset" class="summary-card">
    <step-alt-report-widget-content>
      <div class="card-value">
        @if (averageExecutionDurationLabel$ | async; as data) {
          @if (_state.averageDurationValueLoading() && displayLoadingOnProgress()) {
            <ng-container *ngTemplateOutlet="loadingSpinner" />
          } @else {
            {{ data }}
          }
        } @else {
          <ng-container *ngTemplateOutlet="loadingSpinner" />
        }
      </div>
    </step-alt-report-widget-content>
  </step-alt-report-widget>

  <step-alt-report-widget title="Total Executions" style="min-height: unset" class="summary-card">
    <step-alt-report-widget-content>
      <div class="card-value">
        @if ((totalExecutionsCount$ | async) === null) {
          <ng-container *ngTemplateOutlet="loadingSpinner" />
        } @else {
          @if (_state.totalExecutionsValueLoading() && displayLoadingOnProgress()) {
            <ng-container *ngTemplateOutlet="loadingSpinner" />
          } @else {
            {{ totalExecutionsCount$ | async | bigNumber }}
          }
        }
      </div>
    </step-alt-report-widget-content>
  </step-alt-report-widget>
</div>

<ng-template #loadingSpinner>
  <div class="spinner-container">
    <mat-spinner [diameter]="18" />
  </div>
</ng-template>
