<form #form="ngForm">
  <step-dynamic-textfield
    label="Max tries"
    tooltip="Maximum number of tries if child nodes execution fails"
    [isNumber]="true"
    [(ngModel)]="context.artefact!.maxRetries"
    [disabled]="context.readonly"
    name="maxRetries"
  />
  <step-dynamic-time-input
    label="Grace period"
    tooltip="Duration to wait after a failed attempt"
    [(ngModel)]="context.artefact!.gracePeriod"
    [disabled]="context.readonly"
    name="gracePeriod"
  />
  <step-dynamic-time-input
    label="Timeout"
    tooltip="Maximum execution time for the whole execution retries"
    [(ngModel)]="context.artefact!.timeout"
    [disabled]="context.readonly"
    name="timeout"
  />
  <mat-expansion-panel [(expanded)]="showAdvancedAttributes">
    <mat-expansion-panel-header>
      <mat-panel-title>Advanced</mat-panel-title>
    </mat-expansion-panel-header>
    <section class="panel-content">
      <step-dynamic-checkbox
        label="Release Tokens"
        tooltip="Caution! When enabled this option releases all agent tokens before entering a waiting state. New Tokens will have to be reserved to continue the execution. This also means that the session context will be deleted, if any objects were stored in session, they will have to be recreated and stored again."
        [(ngModel)]="context.artefact!.releaseTokens"
        [disabled]="context.readonly"
        name="releaseTokens"
      />
      <step-dynamic-checkbox
        label="Report only last iteration"
        tooltip="If enabled, only the final iteration will be reported."
        [(ngModel)]="context.artefact!.reportLastTryOnly"
        [disabled]="context.readonly"
        name="reportLastTryOnly"
      />
    </section>
  </mat-expansion-panel>
</form>
