<form #form="ngForm">
  <step-data-source-configuration [context]="context" (forceProtected)="isProtectionForceDisabled.set($event)" />
  @if (context.artefact!.dataSource) {
    <step-dynamic-checkbox
      label="For write"
      [(ngModel)]="context.artefact!.dataSource!.forWrite"
      [disabled]="context.readonly"
      name="forWrite"
    />
    <step-dynamic-checkbox
      label="Protect data source values"
      tooltip="Protected data source values are hidden in reports and can only be passed to Keywords, not resolved in the Plan."
      [(ngModel)]="context.artefact!.dataSource!.protect"
      [disabled]="context.readonly || isProtectionForceDisabled()"
      name="protect"
    />
  }
  <step-dynamic-textfield
    label="Iterator handle"
    [(ngModel)]="context.artefact!.item"
    [disabled]="context.readonly"
    name="item"
  />
  <step-dynamic-checkbox
    label="Reset at end"
    [(ngModel)]="context.artefact!.resetAtEnd"
    [disabled]="context.readonly"
    name="resetAtEnd"
  />
</form>
