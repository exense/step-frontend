<head>
  <meta name="viewport" content="width=device-width, initial-scale=1">
</head>

<input id="collapsable-sidebar-button" type="checkbox">

<div id="mySidebar" class="sidebar" ng-if="isInitialized && (authService.isAuthenticated() || isPublicView() || authService.isExtLoginAuth())">
  <div id="sidebar-logo-and-burgermenu">
    <span class="visible-when-collapsed"><label for="collapsable-sidebar-button"><i class="glyphicon glyphicon-menu-hamburger"></i></label></span>
    <span class="sidebar-aligned-text"><img class="sidebar-logo" alt="" ng-src="{{logo}}"></span>
  </div>
  <div id="sidebar-home-and-settings">
    <span class="visible-when-collapsed">H</span>
    <step-tenant-selection-downgraded class="sidebar-aligned-text"></step-tenant-selection-downgraded>
<!--    <span class="sidebar-aligned-text">Project Name</span>-->
    <span class="sidebar-home-and-settings-divider">|</span>
    <span ng-click="setView('admin')" ng-if="authService.hasRight('admin')" class="sidebar-home-and-settings-icon"><i class="glyphicon glyphicon-cog"></i></span>
  </div>
  <div id="sidebar-categories">
    <div class="sidebar-categories-categories">
      <span ng-click="setView('admin')" ng-if="authService.hasRight('admin')" class='only-visible-when-collapsed sidebar-home-and-settings-icon-collapsed' style="font-size: medium"><i class="glyphicon glyphicon-cog"></i></span>
      <span>Categories</span>
    </div>
    <div id="sidebar-categories-tabs">
      <!-- AUTOMATION -->
      <div class="sidebar-collapsable-tab">
        <input id="collapsable-tab-1" type="checkbox">
        <label for="collapsable-tab-1">
          <i class="glyphicon glyphicon-play visible-when-collapsed"></i>
          <span class="sidebar-aligned-text">Automation</span>
        </label>
        <div class="content">
          <div class="sidebar-subtab" ng-click="setView('functions')">
            <i class="glyphicon glyphicon-record visible-when-collapsed"></i>
            <span class="sidebar-aligned-subtext"><a>Keywords</a></span>
          </div>
          <div class="sidebar-subtab" ng-click="setView('plans')">
            <i class="glyphicon glyphicon-file visible-when-collapsed"></i>
            <span class="sidebar-aligned-subtext"><a>Plans</a></span>
          </div>
          <div class="sidebar-subtab" ng-click="setView('parameters')">
            <span class="visible-when-collapsed">3</span>
            <span class="sidebar-aligned-subtext">Parameters</span>
          </div>
          <section ng-repeat="entry in viewRegistry.getCustomMenuEntriesIncludedInMainMenu('Automation')">
            <div class="sidebar-subtab" ng-click="setView(entry.viewId)">
              <span class="{{entry.menuIconClass}} visible-when-collapsed"></span>
              <span class="sidebar-aligned-subtext">{{entry.label}}</span>
            </div>
          </section>
        </div>
      </div>

      <!-- EXECUTE -->
      <div class="sidebar-collapsable-tab">
        <input id="collapsable-tab-2" type="checkbox">
        <label for="collapsable-tab-2">
          <span class="visible-when-collapsed">B</span>
          <span class="sidebar-aligned-text">Execute</span>
        </label>
        <div class="content">
          <div class="sidebar-subtab" ng-click="setView('executions')">
            <span class="visible-when-collapsed">1</span>
            <span class="sidebar-aligned-subtext">Executions</span>
          </div>
          <div class="sidebar-subtab" ng-click="setView('scheduler')">
            <span class="visible-when-collapsed">2</span>
            <span class="sidebar-aligned-subtext">Scheduler</span>
          </div>
          <section ng-repeat="entry in viewRegistry.getCustomMenuEntriesIncludedInMainMenu('Execute')">
            <div class="sidebar-subtab" ng-click="setView(entry.viewId)">
              <span class="{{entry.menuIconClass}} visible-when-collapsed"></span>
              <span class="sidebar-aligned-subtext">{{entry.label}}</span>
            </div>
          </section>
        </div>
      </div>

      <!-- ALERTING -->
      <div class="sidebar-collapsable-tab">
        <input id="collapsable-tab-3" type="checkbox">
        <label for="collapsable-tab-3">
          <span class="visible-when-collapsed">C</span>
          <span class="sidebar-aligned-text">Alerting</span>
        </label>
        <div class="content">
          <section ng-repeat="entry in viewRegistry.getCustomMenuEntriesIncludedInMainMenu('Alerting')">
            <div class="sidebar-subtab" ng-click="setView(entry.viewId)">
              <span class="{{entry.menuIconClass}} visible-when-collapsed"></span>
              <span class="sidebar-aligned-subtext">{{entry.label}}</span>
            </div>
          </section>
        </div>
      </div>

      <!-- PLUGIN -->
      <div class="sidebar-collapsable-tab">
        <input id="collapsable-tab-4" type="checkbox">
        <label for="collapsable-tab-4">
          <span class="visible-when-collapsed">D</span>
          <span class="sidebar-aligned-text">Plugins</span>
        </label>
        <div class="content">
          <section ng-repeat="entry in viewRegistry.getCustomMenuEntriesIncludedInMainMenu('Plugins')">
            <div class="sidebar-subtab" ng-click="setView(entry.viewId)">
              <span class="{{entry.menuIconClass}} visible-when-collapsed"></span>
              <span class="sidebar-aligned-subtext">{{entry.label}}</span>
            </div>
          </section>
        </div>
      </div>

      <!-- STATUS -->
      <div class="sidebar-collapsable-tab">
        <input id="collapsable-tab-5" type="checkbox">
        <label for="collapsable-tab-5">
          <span class="visible-when-collapsed">E</span>
          <span class="sidebar-aligned-text">Status</span>
        </label>
        <div class="content">
          <div class="sidebar-subtab" ng-click="setView('gridagents')">
            <span class="visible-when-collapsed">1</span>
            <span class="sidebar-aligned-subtext">Agents</span>
          </div>
          <div class="sidebar-subtab" ng-click="setView('gridtokens')">
            <span class="visible-when-collapsed">2</span>
            <span class="sidebar-aligned-subtext">Agent tokens</span>
          </div>
          <div class="sidebar-subtab" ng-click="setView('gridtokengroups')">
            <span class="visible-when-collapsed">3</span>
            <span class="sidebar-aligned-subtext">Token Groups</span>
          </div>
          <div class="sidebar-subtab" ng-click="setView('gridquotamanager')">
            <span class="visible-when-collapsed">4</span>
            <span class="sidebar-aligned-subtext">Quota Manager</span>
          </div>
          <section ng-repeat="entry in viewRegistry.getCustomMenuEntriesIncludedInMainMenu('Status')">
            <div class="sidebar-subtab" ng-click="setView(entry.viewId)">
              <span class="{{entry.menuIconClass}} visible-when-collapsed"></span>
              <span class="sidebar-aligned-subtext">{{entry.label}}</span>
            </div>
          </section>
        </div>
      </div>
    </div>
  </div>
  <div id="sidebar-cost-and-upgrade">
    <div><span>Step</span><br>
      <span>No-cost $0/month</span>
    </div>
    <div><span>Upgrade</span></div>
  </div>
  <div id="sidebar-help-and-support">
    <div><a href="https://step.exense.ch/knowledgebase"><span class="visible-when-collapsed"><i class="glyphicon glyphicon-question-sign"></i></span></a></div>
    <a href="https://step.exense.ch/knowledgebase"><span>Help & Support</span></a>
  </div>
</div>

<div id="main">
  <header class="header-parent" ng-if-start="isInitialized && (authService.isAuthenticated() || isPublicView() || authService.isExtLoginAuth())">
    <div id="header-spacer-part"></div>
    <div class="header-white-part">
      <ul class="nav navbar-nav navbar-right navbar-top-user-logout">
        <li ng-repeat="entry in viewRegistry.getDashlets('/menu/navbar/right')" >
          <div ng-include="entry.template"></div>
        </li>
        <li>
          <a id="sessionDropdown" data-toggle="dropdown"><i class="glyphicon glyphicon-user" ></i> {{context.userID}} [{{context.role}}]</a>
          <ul class="dropdown-menu" aria-labelledby="sessionDropdown">
            <li><a ng-click="setView('myaccount')"><span class="glyphicon glyphicon-cog"></span> My account</a></li>
            <li ng-if="authService.getConf().authentication && authService.isAuthenticated()"><a ng-click="authService.logout()"><span class="glyphicon glyphicon-off"></span> Logout</a></li>
            <li ng-if="authService.getConf().authentication && !authService.isAuthenticated()"><a ng-click="authService.goToLoginPage()">Sign in</a></li>
          </ul>
        </li>
      </ul>
    </div>
  </header>
  <div ng-if-end ng-include="'partials/main.html'" class="st-flex-row"></div>
</div>

<div
  ng-if="isInitialized && !(authService.isAuthenticated() || isPublicView() || authService.isExtLoginAuth())"
  ng-include="'partials/loginForm.html'"
  class="st-flex-row"
></div>


<footer class="main-footer">
  <div class="container main-footer">
    <p style="text-align: center; margin-top: 10px">STEP ${project.version} - Copyright &#169; exense GmbH</p>
    <span style="display:none;" id="frontend-os">${project.versionFEOS}</span>
    <span style="display:none;" id="frontend-ee">${project.versionFEEE}</span>
    <span style="display:none;" id="backend-os">${project.versionBEOS}</span>
    <span style="display:none;" id="backend-ee">${project.versionBEEE}</span>
  </div>
</footer>
