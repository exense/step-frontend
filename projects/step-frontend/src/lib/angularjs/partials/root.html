<div class="main-page">
  <step-theme></step-theme>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
  </head>

  <section ng-if="isInitialized && (authService.isAuthenticated() || isPublicView() || authService.isExtLoginAuth())">
    <step-tenant-selection-downgraded></step-tenant-selection-downgraded>
    <step-sidebar></step-sidebar>
    <div id="main">
      <header class="app-header">
        <section class="content">
          <div></div>
          <ul class="app-header-nav">
            <li ng-repeat="entry in viewRegistry.getDashlets('/menu/navbar/right')">
              <div ng-include="entry.template"></div>
            </li>
            <li>
              <a id="session-dropdown" data-toggle="dropdown"><i class="glyphicon glyphicon-user"></i> {{context.userID}}
                [{{context.role}}]</a>
              <ul class="dropdown-menu" aria-labelledby="session-dropdown">
                <li><a ng-click="setView('myaccount')"><span class="glyphicon glyphicon-cog"></span> My account</a></li>
                <li ng-if="authService.getConf().authentication && authService.isAuthenticated()"><a
                  ng-click="authService.logout()"><span class="glyphicon glyphicon-off"></span> Logout</a></li>
                <li ng-if="authService.getConf().authentication && !authService.isAuthenticated()"><a
                  ng-click="authService.goToLoginPage()">Sign in</a></li>
              </ul>
            </li>
          </ul>
        </section>
      </header>
      <div ng-include="'partials/main.html'" class="st-flex-row"></div>
    </div>
  </section>

  <div
    ng-if="isInitialized && !(authService.isAuthenticated() || isPublicView() || authService.isExtLoginAuth())"
    ng-include="'partials/loginForm.html'"
    class="st-flex-row"
  ></div>

</div>
