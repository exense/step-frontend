<mat-card appearance="outlined">
  <mat-card-header>
    <mat-card-title> Script Editor - Keyword: {{ keyword?.attributes?.['name'] }}</mat-card-title>
    <section class="editor-buttons">
      @if ('kw-write' | hasRight | async) {
        <step-btn-group class="with-borders left-btn-group">
          <button
            type="button"
            mat-stroked-button
            (click)="save()"
            matTooltip="Save this plan"
            matTooltipPosition="below"
          >
            <step-icon name="save" />
          </button>
          <button
            [class.status-no-changes]="noChanges && !isAfterSave"
            [class.status-has-changes]="!noChanges"
            [class.status-saved]="noChanges && isAfterSave"
            disabled
            type="button"
            mat-stroked-button
          >
            {{ noChanges ? (isAfterSave ? 'Saved' : 'No changes') : isAfterSave ? 'Saved' : 'Pending changes' }}
          </button>
        </step-btn-group>
      }
      <step-btn-group class="with-borders">
        <button
          type="button"
          mat-stroked-button
          (click)="execute()"
          matTooltip="Execute this plan"
          matTooltipPosition="below"
        >
          <step-icon name="play" />
        </button>
      </step-btn-group>
    </section>
  </mat-card-header>
  <mat-card-content>
    @if (syntaxMode) {
      <step-rich-editor
        [ngModel]="keywordScript"
        (ngModelChange)="handleScriptChange($event)"
        [disabled]="!('kw-write' | hasRight | async)"
        [syntaxMode]="syntaxMode"
      />
    }
  </mat-card-content>
</mat-card>
