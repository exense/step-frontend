<ng-template #legacyEditor>
  <ng-container *ngIf="artefactMeta?.form as templateUrl">
    <step-artefact-details-wrapper [templateUrl]="templateUrl" [context]="editorContext">
    </step-artefact-details-wrapper>
  </ng-container>
</ng-template>
<section class="editor" *ngIf="artefactMeta?.component as component; else legacyEditor">
  <step-custom-item-render [component]="component" [context]="editorContext"> </step-custom-item-render>
</section>
<mat-expansion-panel *ngIf="artefact" [(expanded)]="showAttributes">
  <mat-expansion-panel-header>
    <mat-panel-title>Properties</mat-panel-title>
  </mat-expansion-panel-header>
  <section class="non-keyword-data" *ngIf="!isKeyword">
    <step-form-field *ngIf="!artefact!.dynamicName!.dynamic; else dynamicName">
      <step-label>Name</step-label>
      <input type="text" [(ngModel)]="artefact!.attributes!['name']" [disabled]="readonly" (blur)="save()" />
      <step-suffix class="button-suffix">
        <button
          type="button"
          mat-stroked-button
          matTooltip="Use an expression to replace dynamically the step name at execution time"
          [disabled]="readonly"
          (click)="switchToDynamicName()"
        >
          <step-icon name="zap"></step-icon>
        </button>
      </step-suffix>
    </step-form-field>
    <ng-template #dynamicName>
      <step-dynamic-textfield label="Name" [disabled]="readonly" [(ngModel)]="artefact.dynamicName" (blur)="save()">
      </step-dynamic-textfield>
    </ng-template>
    <step-form-field>
      <step-label>Description</step-label>
      <textarea [disabled]="readonly" [(ngModel)]="artefact.description" (blur)="save()" rows="5"> </textarea>
    </step-form-field>
  </section>
  <section class="artefact-flags">
    <step-dynamic-checkbox
      label="Instrument"
      tooltip="Instrument this node to measure its execution time. A performance measurement will be created after each execution of this node."
      [disabled]="readonly"
      [(ngModel)]="artefact.instrumentNode"
      (ngModelChange)="save()"
    >
    </step-dynamic-checkbox>
    <step-dynamic-checkbox
      label="Skip node execution"
      tooltip="Switch to disable or enable the execution of this node."
      [disabled]="readonly"
      [(ngModel)]="artefact.skipNode"
      (ngModelChange)="save()"
    >
    </step-dynamic-checkbox>
    <step-dynamic-checkbox
      label="Continue execution of parent element on error"
      tooltip="Defines if the execution of the parent sequence should continue when this node fails. Per default the execution of the sequence will stop in case of any error"
      [disabled]="readonly"
      [(ngModel)]="artefact.continueParentNodeExecutionOnError"
      (ngModelChange)="save()"
    >
    </step-dynamic-checkbox>
  </section>
</mat-expansion-panel>
<hr />
<section class="footer">
  <span>{{ artefactMeta?.label }}</span>
</section>
