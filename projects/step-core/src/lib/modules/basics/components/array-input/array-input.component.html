<mat-chip-list #chipList>
  <ng-container *ngFor="let item of selectedDisplayItems; trackBy: trackByKeyValue; let i = index">
    <mat-chip (removed)="removeItem(i)">
      {{ item.value }}
      <button *ngIf="!isDisabled" matChipRemove>
        <step-icon name="x"></step-icon>
      </button>
    </mat-chip>
  </ng-container>
  <input
    *ngIf="!isDisabled"
    #inputElement
    [stepPreventChars]="preventChars"
    [formControl]="filterCtrl"
    [matAutocomplete]="auto"
    [matChipInputFor]="chipList"
    (matChipInputTokenEnd)="add($event)"
    (blur)="handleBlur()"
  />
</mat-chip-list>
<mat-autocomplete #auto="matAutocomplete" (optionSelected)="select($event)">
  <mat-option *ngFor="let item of displayItems$ | async; trackBy: trackByKeyValue" [value]="item.key">
    {{ item.value }}
  </mat-option>
</mat-autocomplete>
