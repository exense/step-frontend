<mat-menu #menu="matMenu">
  <div *matMenuContent="let element = element" [stepItemHover]="element">
    <ng-container *ngIf="menuContent?.templateRef as templateRef">
      <ng-container *ngTemplateOutlet="templateRef; context: { $implicit: element }"> </ng-container>
    </ng-container>
    <ng-container *ngFor="let item of menuItems; trackBy: trackByMenuItem">
      <button
        type="button"
        mat-menu-item
        [stepEntityMenuItem]="item"
        [entity]="element"
        #menuItem="EntityMenuItem"
        [disabled]="!!(menuItem.isDisabled$ | async)"
        [class.hidden]="!(menuItem.isVisible$ | async)"
        (click)="menuItem.invoke()"
      >
        <step-icon *ngIf="item.icon" [name]="item.icon"></step-icon>
        {{ item.label }}
      </button>
    </ng-container>
  </div>
</mat-menu>
