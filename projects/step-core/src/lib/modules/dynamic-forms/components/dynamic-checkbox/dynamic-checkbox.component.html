@if (dynamic) {
  <step-expression-input
    [label]="label"
    [tooltip]="tooltip"
    [isParentInvalid]="!!_ngControl.invalid"
    [showRequiredMarker]="showRequiredMarker"
    [ngModel]="expression"
    [disabled]="isDisabled"
    (ngModelChange)="onExpressionChange($event)"
    (toggleConstantValue)="toggleDynamicExpression(false)"
  />
} @else {
  <div class="step-checkbox-container" [class.ng-invalid]="!!_ngControl.invalid">
    <section>
      <mat-checkbox
        color="primary"
        [ngModel]="value"
        (ngModelChange)="onValueChange($event)"
        [disabled]="isDisabled"
        (blur)="onBlur()"
      />
      @if (label) {
        <step-label [attr.show-required-marker]="showRequiredMarker || null">{{ label }}</step-label>
      }
      @if (tooltip) {
        <step-icon name="help-circle" [matTooltip]="tooltip" matTooltipPosition="below" />
      }
    </section>
    <button
      type="button"
      mat-icon-button
      matTooltip="Use a dynamic expression to set this attribute"
      matTooltipPosition="below"
      class="dynamic-toggle"
      [disabled]="isDisabled"
      (click)="toggleDynamicExpression(true)"
    >
      <step-icon name="zap" />
    </button>
  </div>
}
