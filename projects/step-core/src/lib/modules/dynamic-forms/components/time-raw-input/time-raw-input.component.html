<step-form-field
  [showRequiredMarker]="showRequiredMarker"
  [class.ng-invalid]="!!parentControl?.invalid"
  [class.ng-touched]="!!parentControl?.touched"
  [class.with-tooltip]="tooltip"
>
  <step-label *ngIf="label">{{ label }}</step-label>
  <input
    type="number"
    [placeholder]="placeholder"
    [ngModel]="displayValue"
    (ngModelChange)="handleDisplayValueChange($event)"
    (blur)="handleBlur()"
    [stepAllowChars]="allowedChars"
    min="0"
  />
  <step-suffix *ngIf="tooltip" class="icon-suffix">
    <step-icon name="help-circle" [matTooltip]="tooltip" matTooltipPosition="below"></step-icon>
  </step-suffix>
  <step-suffix>
    <mat-select
      [ngModel]="internalDisplayMeasure"
      (ngModelChange)="handleDisplayMeasureChange($event)"
      (blur)="handleBlur()"
    >
      <mat-option *ngFor="let item of measureItems; trackBy: trackByMeasureItem" [value]="item.key">
        {{ item.value }}
      </mat-option>
    </mat-select>
  </step-suffix>
  <step-suffix class="button-suffix">
    <button
      type="button"
      mat-stroked-button
      (click)="editConstantValue.emit()"
      [disabled]="!!isDisabled || !!parentControl?.disabled"
    >
      <step-icon name="edit-2"></step-icon>
    </button>
  </step-suffix>
  <step-suffix class="button-suffix">
    <button
      type="button"
      mat-stroked-button
      matTooltip="Use a dynamic expression to set this attribute"
      matTooltipPosition="below"
      (click)="toggleDynamicExpression.emit()"
      [disabled]="!!isDisabled || !!parentControl?.disabled"
    >
      <step-icon name="zap"></step-icon>
    </button>
  </step-suffix>
</step-form-field>
