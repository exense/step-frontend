<step-form-field
  [class.ng-invalid]="!!_ngControl.invalid || !!isParentInvalid"
  [class.ng-touched]="!!_ngControl.touched || !!isParentTouched"
  [class.with-tooltip]="tooltip"
>
  <step-label *ngIf="label" [attr.show-required-marker]="showRequiredMarker || null">{{ label }}</step-label>

  <input
    type="text"
    [required]="!!showRequiredMarker"
    [disabled]="isDisabled || !!isParentDisabled"
    [ngModel]="expression"
    (ngModelChange)="onExpressionChange($event)"
    (blur)="onBlur()"
  />

  <step-suffix *ngIf="tooltip" class="icon-suffix">
    <step-icon name="help-circle" [matTooltip]="tooltip" matTooltipPosition="below"></step-icon>
  </step-suffix>

  <step-suffix class="button-suffix">
    <button
      type="button"
      mat-stroked-button
      [disabled]="isDisabled || !!isParentDisabled"
      (click)="editDynamicExpression()"
    >
      <step-icon name="edit-2"></step-icon>
    </button>
  </step-suffix>

  <step-suffix class="button-suffix">
    <button
      type="button"
      mat-stroked-button
      [disabled]="isDisabled || !!isParentDisabled"
      color="primary"
      matTooltip="Use a constant value to set this attribute"
      matTooltipPosition="below"
      (click)="toggleConstantValue.emit()"
    >
      <step-icon name="zap"></step-icon>
    </button>
  </step-suffix>
</step-form-field>
