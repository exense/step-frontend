<step-bulk-selection-di
  [(selectionType)]="selectionType"
  (selectionTypeChange)="selectionTypeChange.emit(selectionType)"
  [showLabel]="false"
>
</step-bulk-selection-di>
<div>
  <ng-template #legacy>
    <button
      *ngFor="let operation of availableOperationsLegacy!; trackBy: trackByLegacy"
      type="button"
      mat-icon-button
      [class]="operation.operation"
      (click)="invoke(operation)"
      [matTooltip]="operation.operation | bulkOperationLabel"
      [disabled]="
        (operation.permission && !(operation.permission | hasRight | async)) || (isOperationsDisabled$ | async)
      "
    >
      <step-icon [name]="operation.operation | bulkOperationIcon"></step-icon>
    </button>
  </ng-template>
  <ng-template #new>
    <button
      *ngFor="let operation of entityOperations!; trackBy: trackByNew"
      type="button"
      mat-icon-button
      [class]="operation.type"
      (click)="invoke(operation)"
      [matTooltip]="operation.label!"
      [disabled]="
        (operation.permission && !(operation.permission | hasRight | async)) || (isOperationsDisabled$ | async)
      "
    >
      <step-icon [name]="operation.icon"></step-icon>
    </button>
  </ng-template>
  <ng-container *ngIf="availableOperationsLegacy; then legacy; else new"> </ng-container>
</div>
<step-bulk-selection-label [(selectionType)]="selectionType" [selectionCollector]="_selectionCollector!">
</step-bulk-selection-label>
