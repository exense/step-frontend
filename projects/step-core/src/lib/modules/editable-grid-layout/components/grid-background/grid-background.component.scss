@use 'projects/step-core/styles/core-variables' as var;
@use '../grid-sizes' as sizes;

step-grid-background {
  $cols-count: var(--style__cols-count);
  $cols-count-1: calc(var(--style__cols-count) - 1);
  $rows-count: var(--style__rows-count);

  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  padding-bottom: sizes.$row-height;

  .grid-measure {
    &.vertical-cols {
      position: absolute;
      top: -(sizes.$row-gap);
      left: -(sizes.$column-gap);
      width: 100%;
      height: 100%;
      display: grid;
      grid-template-columns: repeat($cols-count, sizes.$column-gap);
      grid-template-rows: 1fr;
      column-gap: sizes.columnWidth($cols-count-1);
    }

    &.horizontal-rows {
      top: -(sizes.$row-gap);
      left: -(sizes.$column-gap);
      position: relative;
      display: grid;
      grid-template-columns: 1fr;
      grid-template-rows: repeat($rows-count, sizes.$row-gap);
      row-gap: sizes.$row-height;
    }
  }

  .grid-measure-row {
    position: relative;
    & > section {
      display: none;
      position: absolute;
      background: var.$blue-50;
      opacity: 0.5;
      top: sizes.$row-gap;
      left: 0;
      width: 100%;
      height: sizes.$row-height;
    }
  }

  .grid-measure-row,
  .grid-measure-column {
    background: var.$gray-50;
  }

  .grid-measure-row:has(button:hover) > section {
    display: block;
  }

  .grid-measure-row button {
    margin-top: -0.8rem;
    margin-left: -1.5rem;
  }
}
