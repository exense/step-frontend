@if (attachmentType(); as attachmentType) {
  @switch (attachmentType) {
    @case (AttachmentType.IMG) {
      <img [ngSrc]="(attachment() | attachmentUrl)!" fill />
    }
    @case (AttachmentType.STREAMING_TEXT) {
      <step-streaming-text [attachment]="attachment()!" [(status)]="streamingStatus" [displayLatestRows]="4" />
    }
    @default {
      <div class="file-info">
        <step-icon [name]="attachmentType | attachmentTypeIcon" />
      </div>
    }
  }
}
<div
  class="name"
  [ngClass]="{
    overlay: attachmentType() === AttachmentType.IMG || attachmentType() === AttachmentType.STREAMING_TEXT,
    skipped: attachmentType() === AttachmentType.SKIPPED
  }"
>
  {{ attachment()?.name }}
</div>

<div class="actions">
  @if (isStreamingInProgress()) {
    <mat-spinner [diameter]="15" />
  } @else {
    <button type="button" mat-icon-button matTooltip="Download" matTooltipPosition="below" (click)="download($event)">
      <step-icon name="download" />
    </button>
  }
</div>
