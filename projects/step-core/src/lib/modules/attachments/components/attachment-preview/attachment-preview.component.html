@if (attachmentType(); as attachmentType) {
  @switch (attachmentType) {
    @case (AttachmentType.IMG) {
      <img [ngSrc]="(attachment() | attachmentUrl)!" fill />
    }
    @case (AttachmentType.STREAMING_TEXT) {
      <step-streaming-text #streamingText [attachment]="attachment()!" [displayLatestRows]="6" [fontSize]="8" />
    }
    @default {
      <div class="file-info">
        <step-icon [name]="attachmentType | attachmentTypeIcon" />
      </div>
    }
  }
}
<div
  class="name"
  [ngClass]="{
    overlay: attachmentType() === AttachmentType.IMG || attachmentType() === AttachmentType.STREAMING_TEXT,
    skipped: attachmentType() === AttachmentType.SKIPPED
  }"
>
  {{ attachment()?.name }}
</div>

<div class="actions">
  @if (isStreamingInProgress()) {
    <mat-spinner [diameter]="15" />
  } @else {
    <step-btn-group class="with-round-corners">
      <button type="button" mat-flat-button matTooltip="Download" matTooltipPosition="below" (click)="download($event)">
        <step-icon name="download" />
      </button>
    </step-btn-group>
  }
</div>
