<div
  class="tree-node"
  [class.tree-node-selected]="node.id | isNodeSelected | async"
  [class.tree-node-selected-for-insert]="node.id | isNodeSelectedForInsert | async"
  [class.tree-node-hidden]="isHideRoot && (node.id | isRootNode | async)"
  [class.skipped]="node.isSkipped"
  cdkDrag
  [cdkDragBoundary]="treeContainer"
  [cdkDragDisabled]="dragDisabled || (node.id | isRootNode | async)"
  [cdkDragData]="node.id"
  (cdkDragStarted)="dragStart($event)"
  (cdkDragEntered)="dragEnter($event)"
  (cdkDragEnded)="dragEnd()"
>
  <ng-template #noToggle>
    <div class="no-toggle"></div>
  </ng-template>
  <button *ngIf="canToggle; else noToggle" mat-button mat-icon-button (click)="toggle()">
    <step-icon class="toggle-state" [name]="toggleStateIcon"></step-icon>
  </button>
  <div class="node-content" cdkDragHandle (contextmenu)="openContextMenu($event)">
    <div class="node-icon">
      <step-icon [name]="node.icon" [class]="node.iconClassName"> </step-icon>
    </div>
    <step-tree-node-name [node]="node"></step-tree-node-name>
  </div>
  <step-tree-drag-placeholder *cdkDragPlaceholder [dropInfo]="dropInfo$ | async"> </step-tree-drag-placeholder>
  <step-tree-drag-preview *cdkDragPreview> </step-tree-drag-preview>
</div>
