<div
  class="tree-node"
  [class.tree-node-selected]="isSelected()"
  [class.tree-node-selected-for-insert]="isSelectedForInsert()"
  [class.tree-node-hidden]="isHidden()"
  [class.skipped]="node().isVisuallySkipped"
  [class.root-node]="isRootNode()"
>
  @if (canToggle) {
    <button mat-icon-button (click)="toggle()">
      <step-icon class="toggle-state" [name]="toggleStateIcon()" />
    </button>
  } @else {
    <div class="no-toggle"></div>
  }
  @if (node(); as n) {
    <div
      class="node-content"
      (contextmenu)="openContextMenu($event)"
      [stepDragItem]="n.id"
      [dragDisabled]="dragDisabled"
    >
      @if (n.icon) {
        <div class="node-icon">
          <step-icon [name]="n.icon" [class]="n.iconClassName" />
        </div>
      }
      <step-tree-node-name [node]="n" />
    </div>
  }
</div>
@if (_treeNodeTemplateContainer.treeNodeDetailsTemplate(); as detailsTemplate) {
  @if (node(); as n) {
    <div class="tree-node-details">
      <ng-container *ngTemplateOutlet="detailsTemplate.templateRef; context: { $implicit: n }" />
    </div>
  }
}
