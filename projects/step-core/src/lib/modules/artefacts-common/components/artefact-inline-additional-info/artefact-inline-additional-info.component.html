@if (hasData()) {
  <section class="etc-container">
    @if (attachmentMetas(); as attachments) {
      @if (!!attachments.length) {
        <div class="attachments-container">
          <step-icon name="paperclip" matTooltip="Attachments" />
          @for (att of attachments; track att.id) {
            <step-popover [noPadding]="true" yPosition="below" [mode]="PopoverMode.HOVER" [withBorder]="true">
              <span class="highlight-inline-item" (click)="open(att, $event)">{{ att.name }}</span>
              <step-popover-content>
                @switch (att | attachmentType) {
                  @case (AttachmentType.IMG) {
                    <step-attachment-preview
                      class="large"
                      [attachment]="att"
                      [showDownload]="false"
                      [withBorder]="false"
                    />
                  }
                  @case (AttachmentType.TEXT) {
                    <step-attachment-preview [attachment]="att" [showDownload]="false" [withBorder]="false" />
                  }
                  @default {
                    <div class="default-attachment-popover-view">
                      @switch (att | attachmentType) {
                        @case (AttachmentType.VIDEO) {
                          <step-icon name="film" />
                        }
                        @default {
                          <step-icon name="paperclip" />
                        }
                      }
                      <span>{{ att.name }}</span>
                    </div>
                  }
                }
              </step-popover-content>
            </step-popover>
          }
        </div>
      }
    }
    @if (error(); as error) {
      <div class="error-container">
        <step-icon name="alert-triangle" />
        <div class="error-text" [matTooltip]="error" matTooltipPosition="below">{{ error }}</div>
      </div>
    }
  </section>
}
